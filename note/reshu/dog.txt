!2021-03-07 22:58:49

dog.attributes.position.array[344*3+1] = 5
dog.attributes.position.needsUpdate = true

Сегменты считаем с конца хвоста.
Нулевой сегмент - конус.
Первый сегмент - соединительное звено.
Второй сегмент - цилиндр, который можно только поворачивать, но нельзя тянуть, гнуть, скручивать.
Есть ось второго сегмента. На ней простой пропорцией откладываем половину длины соединительного звена. Это мы получаем точку поворота для нулевого сегмента.
Есть ось нулевого сегмента. Опять таки простой пропорцией получаем в теории ту же самую точку поворота.
Но поскольку в blender'е мы рисовали не по теории, то точки не совпадут.
Но нам ничего не мешает двинуть все точки нулевого сегмента на величину разницы между найденными точками.

Далее можем махать нулевым сегментом. Сделаем соотвутствующую функцию. В нее будем передавать объект поворота - список точек хвоста, количество поворачиваемых сегментов, центр поворота (можно его не передавать, а вычислить по следующему сегменту, но в первый раз можно и передать), и параметры поворота - углы по вертикали и по горизонтали в градусах. Для маха нам надо пересчитать поворот для всех точек относительно известного центра на указанные градусы.

Обратить внимание, что когда мы будем махать вторым сегоментом, то вместе с ним точно так же должен двигаться нулевой сегмент.
